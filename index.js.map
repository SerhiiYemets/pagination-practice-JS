{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["import './css/styles.css'\nimport axios from 'axios'\n\n\n// Створи фільмотеку з популярними фільмами, для цього використай\n// https://developer.themoviedb.org/reference/trending-movies\n\n// Щоб отримати постер фільму потрібно підставити url з відповіді від бекенду та url з документації\n// https://developer.themoviedb.org/docs/image-basics\n\n// Відмалюй картки з фільмами\n// Приклад картки  => https://prnt.sc/Hi_iLLg7Nd1F\n\n// Реалізуй пагінацію\n// 1 Кнопка \"Load More\"\n// 2 Infinity scroll (https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API)\n\nconst BASE_URL = \"https://api.themoviedb.org/3\";\nconst END_POINT = \"/trending/movie/week\";\nconst API_KEY = \"345007f9ab440e5b86cef51be6397df1\";\n\nconst container = document.querySelector(\".js-movie-list\");\nconst loadMore = document.querySelector(\".js-load-more\");\n\nloadMore.addEventListener(\"click\", onLoadMore);\n\nlet page = 499;\n\nasync function serviceMovie(page = 1) {\n    const { data } = await axios.get(`${BASE_URL}${END_POINT}`, {\n        params: {\n            api_key: API_KEY,\n            page\n        },\n        headers: {\n            'Accept': 'application/json',\n            'Authorization': 'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIyZjU2NGJhNDBkMTk3OWY0YzFmMzE2NmQzNmFiMTdjNSIsIm5iZiI6MTc2MTQ5MzExMC45MTM5OTk4LCJzdWIiOiI2OGZlNDA3NjI4MjFiZWZkNzZlYWFlY2MiLCJzY29wZXMiOlsiYXBpX3JlYWQiXSwidmVyc2lvbiI6MX0.vbylhF6rwMOYEqlP0Cl-z6-U5SxCWucPy_OsRQDkPww'\n        }\n    });\n    return data;\n}\n\nserviceMovie(page)\n    .then((data) => {\n        console.log(data);\n        container.insertAdjacentHTML(\"beforeend\", createMarkup(data.results));\n\n        if (data.page < data.total_pages) {\n            loadMore.classList.replace(\"load-more-hidden\", \"load-more\");\n        }\n    })\n    .catch((error) => {\n        alert(error.message);\n    });\n\nfunction createMarkup(arr) {\n    return arr.map(({ original_title, release_date, poster_path, vote_average }) => `\n        <li class=\"movie-card\">\n            <img src=\"https://image.tmdb.org/t/p/w300${poster_path}\" alt=\"${original_title}\"/>\n            <div class=\"movie-info\">\n                <h2>${original_title}</h2>\n                <p>Release Date: ${release_date}</p>\n                <p>Vote Average: ${vote_average}</p>\n            </div>\n        </li>\n    `).join(\"\");\n}\nasync function onLoadMore() {\n    page++;\n    loadMore.disabled = true;\n\n    try {\n        const data = await serviceMovie(page);\n        console.log(data);\n        container.insertAdjacentHTML(\"beforeend\", createMarkup(data.results))\n        \n        if (data.page >= data.total_pages) {\n            loadMore.classList.replace( \"load-more\", \"load-more-hidden\");\n        }\n\n    } catch (error) {\n        alert(error.message)\n    } finally {\n        loadMore.disabled = false;\n    }\n}\n"],"names":["BASE_URL","END_POINT","API_KEY","container","loadMore","onLoadMore","page","serviceMovie","data","axios","createMarkup","error","arr","original_title","release_date","poster_path","vote_average"],"mappings":"svBAiBA,MAAMA,EAAW,+BACXC,EAAY,uBACZC,EAAU,mCAEVC,EAAY,SAAS,cAAc,gBAAgB,EACnDC,EAAW,SAAS,cAAc,eAAe,EAEvDA,EAAS,iBAAiB,QAASC,CAAU,EAE7C,IAAIC,EAAO,IAEX,eAAeC,EAAaD,EAAO,EAAG,CAClC,KAAM,CAAE,KAAAE,GAAS,MAAMC,EAAM,IAAI,GAAGT,CAAQ,GAAGC,CAAS,GAAI,CACxD,OAAQ,CACJ,QAASC,EACT,KAAAI,CACH,EACD,QAAS,CACL,OAAU,mBACV,cAAiB,6PACpB,CACT,CAAK,EACD,OAAOE,CACX,CAEAD,EAAaD,CAAI,EACZ,KAAME,GAAS,CACZ,QAAQ,IAAIA,CAAI,EAChBL,EAAU,mBAAmB,YAAaO,EAAaF,EAAK,OAAO,CAAC,EAEhEA,EAAK,KAAOA,EAAK,aACjBJ,EAAS,UAAU,QAAQ,mBAAoB,WAAW,CAEtE,CAAK,EACA,MAAOO,GAAU,CACd,MAAMA,EAAM,OAAO,CAC3B,CAAK,EAEL,SAASD,EAAaE,EAAK,CACvB,OAAOA,EAAI,IAAI,CAAC,CAAE,eAAAC,EAAgB,aAAAC,EAAc,YAAAC,EAAa,aAAAC,CAAY,IAAO;AAAA;AAAA,uDAE7BD,CAAW,UAAUF,CAAc;AAAA;AAAA,sBAEpEA,CAAc;AAAA,mCACDC,CAAY;AAAA,mCACZE,CAAY;AAAA;AAAA;AAAA,KAG1C,EAAE,KAAK,EAAE,CACd,CACA,eAAeX,GAAa,CACxBC,IACAF,EAAS,SAAW,GAEpB,GAAI,CACA,MAAMI,EAAO,MAAMD,EAAaD,CAAI,EACpC,QAAQ,IAAIE,CAAI,EAChBL,EAAU,mBAAmB,YAAaO,EAAaF,EAAK,OAAO,CAAC,EAEhEA,EAAK,MAAQA,EAAK,aAClBJ,EAAS,UAAU,QAAS,YAAa,kBAAkB,CAGlE,OAAQO,EAAO,CACZ,MAAMA,EAAM,OAAO,CAC3B,QAAc,CACNP,EAAS,SAAW,EACvB,CACL"}